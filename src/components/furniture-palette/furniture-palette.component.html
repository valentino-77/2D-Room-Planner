<div class="space-y-6">
  <!-- Group: Living Room -->
  <div class="group">
    <div class="grid grid-cols-2 gap-3">
      @for (template of visibleFurnitureTemplates(); track template.type) {
        <button 
          (click)="addFurniture(template.type)" 
          class="flex flex-col items-center p-3 rounded-lg border border-zinc-200 bg-zinc-50 hover:bg-white hover:border-zinc-300 hover:shadow-md transition-all duration-200 group/item text-center">
          
          <div class="w-10 h-10 rounded mb-2 flex items-center justify-center shadow-sm transition-transform group-hover/item:scale-110 text-white" [style.background-color]="template.color">
             @switch (template.iconName) {
               @case ('bed') {
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>
               }
               @case ('chair') {
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3"/><path d="M3 11v5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z"/><path d="M5 18v2"/><path d="M19 18v2"/></svg>
               }
               @case ('table') {
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="14" x="3" y="5" rx="2"/><path d="M5 19v-4"/><path d="M19 19v-4"/><path d="M3 9h18"/></svg>
               }
               @case ('sofa') {
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3"/><path d="M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0Z"/></svg>
               }
               @case ('armchair') {
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3"/><path d="M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z"/><path d="M5 18v2"/><path d="M19 18v2"/></svg>
               }
               @case ('tv') {
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="15" x="2" y="7" rx="2" ry="2"/><polyline points="17 2 12 7 7 2"/></svg>
               }
               @case ('bookshelf') {
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><path d="M4 7h16"/><path d="M4 12h16"/><path d="M4 17h16"/></svg>
               }
               @case ('wardrobe') {
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="20" x="3" y="2" rx="2"/><path d="M12 2v20"/><path d="M12 12h1"/><path d="M11 12h1"/></svg>
               }
               @case ('dresser') {
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M3 9h18"/><path d="M3 15h18"/></svg>
               }
               @case ('nightstand') {
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="6" width="12" height="12" rx="2"/><path d="M6 12h12"/><circle cx="12" cy="9" r="1"/></svg>
               }
               @case ('rug') {
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M3 9h18"/><path d="M3 15h18"/><path d="M9 3v18"/><path d="M15 3v18"/></svg>
               }
               @case ('lamp') {
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m8 7 1.4-2.8A2 2 0 0 1 11.2 3h1.6a2 2 0 0 1 1.8 1.2L16 7"/><path d="M6 7h12"/><path d="M12 7v14"/><path d="M9 21h6"/></svg>
               }
               @case ('desk') {
                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="12" rx="2"/><path d="M3 16h18"/><path d="M5 16v5"/><path d="M19 16v5"/></svg>
               }
               @default {
                 <div class="w-1/2 h-1/2 bg-white/30 rounded-sm"></div>
               }
             }
          </div>
          
          <span class="text-[10px] font-medium text-zinc-600 group-hover/item:text-zinc-900 line-clamp-1 leading-tight">{{ template.name }}</span>
        </button>
      }
    </div>
  </div>

  @if (allFurnitureTemplates.length > 6) {
    <button (click)="toggleExpanded()" class="w-full py-2 text-xs font-semibold text-zinc-500 hover:text-zinc-900 border border-dashed border-zinc-300 rounded hover:bg-zinc-50 transition-colors flex items-center justify-center gap-2">
      <span>{{ isExpanded() ? 'Collapse Library' : 'View Full Library' }}</span>
      <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 transition-transform duration-300" [class.rotate-180]="isExpanded()" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
      </svg>
    </button>
  }
</div>